{"version":3,"sources":["webpack:///./src/components/FileUpload.vue?3a18","webpack:///./src/components/FileUpload.vue?a5ba","webpack:///src/components/FileUpload.vue","webpack:///./src/components/FileUpload.vue?52d0","webpack:///./src/components/FileUpload.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_FileUpload_vue_vue_type_style_index_0_id_7893b567_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_FileUpload_vue_vue_type_style_index_0_id_7893b567_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","imgId","class","uploaded","cloneUploadStatus","uploading","video","inputId","on","click","$event","browseFileWindow","directives","name","rawName","value","expression","stopPropagation","initialUploadedFile","thumbId","_v","_s","thumbText","attrs","max","domProps","progress","staticStyle","display","type","accept","uploadType","change","onFileChange","staticRenderFns","FileUploadvue_type_script_lang_js_","props","[object Object]","file","fileList","policy","status","uploadStatus","progressShow","computed","val","$emit","methods","item","$refs","style","backgroundImage","e","index","target","files","self","size","alert","storageRef","firebaseHelper","storage","Date","getTime","put","then","snapshot","reader","FileReader","onload","result","readAsDataURL","components_FileUploadvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"kHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAukBE,EAAG,G,2CCA1kB,IAAIE,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACG,IAAIP,EAAIQ,MAAMF,YAAY,cAAcG,MAAM,CAAEC,SAAoC,aAA1BV,EAAIW,kBAAkCC,UAAoC,cAA1BZ,EAAIW,kBAAmCE,MAAuB,UAAhBb,EAAIc,SAAsBC,GAAG,CAACC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIkB,iBAAiBlB,EAAIc,YAAY,CAACV,EAAG,SAAS,CAACe,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAiC,aAA1BtB,EAAIW,kBAAkCY,WAAW,qCAAqCjB,YAAY,cAAcS,GAAG,CAACC,MAAQ,SAASC,GAAiC,OAAzBA,EAAOO,kBAAyBxB,EAAIyB,oBAAoBR,OAAYb,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,OAAO,CAACe,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAiC,aAA1BtB,EAAIW,kBAAkCY,WAAW,qCAAqChB,IAAIP,EAAI0B,SAAS,CAAC1B,EAAI2B,GAAG3B,EAAI4B,GAAG5B,EAAI6B,cAAczB,EAAG,WAAW,CAACe,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOtB,EAAgB,aAAEuB,WAAW,iBAAiBjB,YAAY,sBAAsBwB,MAAM,CAACC,IAAM,OAAOC,SAAS,CAACV,MAAQtB,EAAIiC,WAAW,CAACjC,EAAI2B,GAAG3B,EAAI4B,GAAG5B,EAAIiC,iBAAiB7B,EAAG,QAAQ,CAACG,IAAIP,EAAIc,QAAQR,YAAY,YAAY4B,YAAY,CAACC,QAAU,QAAQL,MAAM,CAACM,KAAO,OAAOC,OAASrC,EAAIsC,YAAYvB,GAAG,CAACwB,OAAS,SAAStB,GAAQ,OAAOjB,EAAIwC,aAAcvB,EAAQjB,EAAIQ,MAAO,UAChzCiC,EAAkB,G,YCePC,EAAA,CACbtB,KAAM,aACNuB,MAAO,CAAC,aAAc,UAAW,QAAS,UAAW,gBACrDC,OACE,MAAO,CACLC,KAAM,GACNC,SAAU,GACVC,OAAQ,GACRC,OAAQ/C,KAAKgD,aACbpB,UAAW,GACXI,SAAU,GACViB,cAAc,IAGlBC,SAAU,CACRxC,kBAAmB,CACjBiC,MACE,OAAO3C,KAAKgD,cAEdL,IAAKQ,GACHnD,KAAKoD,MAAM,sBAAuBD,MAIxCR,UACsB,UAAjB3C,KAAKa,QACNb,KAAK4B,UAAY,KAEjB5B,KAAK4B,UAAY,MAGrByB,QAAS,CACPV,iBAAkBW,GAChBtD,KAAKuD,MAAMD,GAAMvC,SAEnB4B,sBACE3C,KAAKU,kBAAoB,UACzBV,KAAKuD,MAAMvD,KAAKO,OAAOiD,MAAMC,gBAAkB,GAC/CzD,KAAKuD,MAAMvD,KAAKa,SAASQ,MAAQ,IAEnCsB,mBAAoBe,EAAGJ,EAAMK,GAE3B,GADA3D,KAAK4C,KAAOc,EAAEE,OAAOC,MAAM,IACtB7D,KAAK4C,KAGR,OAFA5C,KAAKwB,2BACLxB,KAAKiD,cAAe,GAEf,CACLjD,KAAKU,kBAAoB,UACzBV,KAAKuD,MAAMvD,KAAKO,OAAOiD,MAAMC,gBAAkB,GAC/CzD,KAAKgC,SAAW,IAChB,IAAI8B,EAAO9D,KACX,GAAIA,KAAK4C,KAAKmB,KAAO,SAEnB,YADAC,MAAM,0BAGRhE,KAAKiD,cAAe,EACpBjD,KAAKU,kBAAoB,YACzB,IAAIuD,EAAaC,EAAA,KAAYC,QAAQ7D,KAAI,IAAI8D,MAAOC,UAAYrE,KAAK4C,KAAKzB,MAC1E8C,EAAWK,IAAItE,KAAK4C,MAAM2B,KAAK,SAASC,GACtC,GAAIV,EAAKlB,KAAM,CACb,IAAI6B,EAAS,IAAIC,WACjBD,EAAOE,OAAS,SAAUjB,GACZ,WAATJ,IACDQ,EAAKP,MAAMD,GAAME,MAAMC,gBAAkB,OAASC,EAAEE,OAAOgB,OAAS,KAEtEd,EAAKpD,kBAAoB,WACzBoD,EAAKb,cAAe,EACpBa,EAAK9B,SAAW,EAChB8B,EAAKV,MAAM,gBAAgB,IAE7BqB,EAAOI,cAAcf,EAAKlB,aCtF6JkC,EAAA,E,wBCQ/LC,EAAYC,OAAAC,EAAA,KAAAD,CACdF,EACAhF,EACA0C,GACA,EACA,KACA,WACA,MAIa0C,EAAA,WAAAH,E","file":"js/chunk-52a382da.1724ed2d.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=style&index=0&id=7893b567&lang=sass&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=style&index=0&id=7893b567&lang=sass&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"file\"},[_c('div',{ref:_vm.imgId,staticClass:\"uploadLabel\",class:{ uploaded: _vm.cloneUploadStatus === 'uploaded', uploading:_vm.cloneUploadStatus === 'uploading', video: _vm.inputId === 'file4' },on:{\"click\":function($event){return _vm.browseFileWindow(_vm.inputId)}}},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cloneUploadStatus === 'uploaded'),expression:\"cloneUploadStatus === 'uploaded'\"}],staticClass:\"initialFile\",on:{\"click\":function($event){$event.stopPropagation();return _vm.initialUploadedFile($event)}}}),_c('div',{staticClass:\"uploadContent\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cloneUploadStatus !== 'uploaded'),expression:\"cloneUploadStatus !== 'uploaded'\"}],ref:_vm.thumbId},[_vm._v(_vm._s(_vm.thumbText))]),_c('progress',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.progressShow),expression:\"progressShow\"}],staticClass:\"progress is-primary\",attrs:{\"max\":\"100\"},domProps:{\"value\":_vm.progress}},[_vm._v(_vm._s(_vm.progress))])])]),_c('input',{ref:_vm.inputId,staticClass:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":_vm.uploadType},on:{\"change\":function($event){return _vm.onFileChange( $event, _vm.imgId, 0)}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"file\">\n    <div class=\"uploadLabel\" :ref=\"imgId\" @click=\"browseFileWindow(inputId)\" :class=\"{ uploaded: cloneUploadStatus === 'uploaded', uploading:cloneUploadStatus === 'uploading', video: inputId === 'file4' }\">\n      <button class=\"initialFile\" v-show=\"cloneUploadStatus === 'uploaded'\" @click.stop=\"initialUploadedFile\"></button>\n      <div class=\"uploadContent\">\n        <span :ref=\"thumbId\" v-show=\"cloneUploadStatus !== 'uploaded'\">{{ thumbText }}</span>\n        <progress class=\"progress is-primary\" :value=\"progress\" max=\"100\" v-show=\"progressShow\">{{ progress }}</progress>\n      </div>\n    </div>\n    <input class=\"fileInput\" style=\"display: none\" type=\"file\" :ref=\"inputId\" @change=\"onFileChange( $event, imgId, 0)\" :accept=\"uploadType\" >\n  </div>\n</template>\n\n<script>\nimport firebaseObj from '@/middleware/firebaseHelper.js';\n\nexport default {\n  name: 'FileUpload',\n  props: ['uploadType', 'inputId', 'imgId', 'thumbId', 'uploadStatus'],\n  data () {\n    return {\n      file: '',\n      fileList: [],\n      policy: '',\n      status: this.uploadStatus,\n      thumbText: '',\n      progress: '',\n      progressShow: false\n    }\n  },\n  computed: {\n    cloneUploadStatus: {\n      get () {\n        return this.uploadStatus;\n      },\n      set (val) {\n        this.$emit('update:uploadStatus', val)\n      }\n    }\n  },\n  mounted () {\n    if(this.inputId === 'file4'){\n      this.thumbText = '影片';\n    } else {\n      this.thumbText = '照片';\n    }\n  },\n  methods: {\n    browseFileWindow (item) {\n      this.$refs[item].click();\n    },\n    initialUploadedFile () {\n      this.cloneUploadStatus = 'default';\n      this.$refs[this.imgId].style.backgroundImage = '';\n      this.$refs[this.inputId].value = '';\n    },\n    async onFileChange (e, item, index) {\n      this.file = e.target.files[0];\n      if (!this.file) {\n        this.initialUploadedFile();\n        this.progressShow = false;\n        return;\n      } else {\n        this.cloneUploadStatus = 'default';\n        this.$refs[this.imgId].style.backgroundImage = '';\n        this.progress = '0';\n        let self = this;\n        if (this.file.size > 10*1024*1024) {\n          alert('File upload 10MB limit');\n          return;\n        }\n        this.progressShow = true;\n        this.cloneUploadStatus = 'uploading';\n        let storageRef = firebaseObj.storage.ref(new Date().getTime() + this.file.name);\n        storageRef.put(this.file).then(function(snapshot) {\n          if (self.file) {\n            let reader = new FileReader();\n            reader.onload = function (e) {\n              if(item !== \"photo4\"){\n                self.$refs[item].style.backgroundImage = \"url(\" + e.target.result + \")\";\n              }\n              self.cloneUploadStatus = 'uploaded';\n              self.progressShow = false;\n              self.progress = 0;\n              self.$emit('progressShow', false);\n            }\n            reader.readAsDataURL(self.file);\n          }\n        });\n        // storageRef.child(this.file.name).put(this.file).then(function(snapshot) {\n        //   console.log('Uploaded a blob or file!');\n        // });\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"sass\" scoped>\n  .file\n    width: 24%\n    display: inline-block\n    margin-right: .5em\n    .uploadLabel\n      width: 100%\n      height: 80px\n      cursor: pointer\n      display: flex\n      justify-content: center\n      align-items: flex-end\n      background: url(/img/uploadpic.svg) center #ffffff no-repeat\n      border: dashed 2px #c7c7c7\n      .uploadContent\n        position: absolute\n        text-align: center\n        width: 97%\n        span\n          color: #4a4a4a\n          font-size: 12px\n        progress\n          height: .5em\n      .initialFile\n        background: url(/img/icon-no.svg) center transparent no-repeat\n        width: 15px\n        height: 15px\n        position: absolute\n        top: 5px\n        right: 5px\n        border: none\n    .uploadLabel.video\n      background: url(/img/videoupload.svg) center #ffffff no-repeat\n    .uploaded\n      background-size: contain\n    .uploaded.video\n      background: url(/img/videosuccess.svg) center\n      background-size: cover\n      border: none\n      border-radius: 5px\n    .uploading\n      border-color: #dbdbdb\n      opacity: 0.5\n      pointer-events: none\n      user-select: none\n  .file:last-child\n    margin-right: 0\n  .networkMsg\n    font-size: 12px\n    color: #fd737a\n  @media (max-width: 800px)\n    .file\n      margin-right: 1vw\n      .uploadLabel\n        height: 60px\n        border: dashed 1px #c7c7c7\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FileUpload.vue?vue&type=template&id=7893b567&scoped=true&\"\nimport script from \"./FileUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./FileUpload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FileUpload.vue?vue&type=style&index=0&id=7893b567&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7893b567\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}